{"code":"import { action } from \"@formily/reactive\";\r\nfunction checkExsitInFieldDataSource(field) {\r\n    var _a;\r\n    return (((_a = field.dataSource) === null || _a === void 0 ? void 0 : _a.findIndex(function (_a) {\r\n        var _b;\r\n        var value = _a.value;\r\n        return field.value === value || ((_b = field.value) === null || _b === void 0 ? void 0 : _b.includes(value));\r\n    })) === -1);\r\n}\r\nexport var useAsyncDataSource = function (service, checkExsit) {\r\n    if (checkExsit === void 0) { checkExsit = true; }\r\n    return function (field, form) {\r\n        var _a;\r\n        field.loading = true;\r\n        service(field, form).then((_a = action === null || action === void 0 ? void 0 : action.bound) === null || _a === void 0 ? void 0 : _a.call(action, function (data) {\r\n            field.dataSource = data;\r\n            if (checkExsit && checkExsitInFieldDataSource(field)) {\r\n                field.setValue(undefined);\r\n            }\r\n            field.loading = false;\r\n        }));\r\n    };\r\n};\r\n//# sourceMappingURL=scope.js.map","references":["H:/projects/formilyjs-arco/node_modules/@formily/reactive/esm/index.d.ts","H:/projects/formilyjs-arco/node_modules/@formily/core/esm/models/index.d.ts"],"map":"{\"version\":3,\"file\":\"scope.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/schema-form/scope.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,mBAAmB,CAAC;AAG3C,SAAS,2BAA2B,CAAC,KAAY;;IAC/C,OAAO,CACL,CAAA,MAAA,KAAK,CAAC,UAAU,0CAAE,SAAS,CACzB,UAAC,EAAc;;YAAZ,KAAK,WAAA;QAAY,OAAA,KAAK,CAAC,KAAK,KAAK,KAAK,KAAI,MAAA,KAAK,CAAC,KAAK,0CAAE,QAAQ,CAAC,KAAK,CAAC,CAAA,CAAA;KAAA,CAC1E,MAAK,CAAC,CAAC,CACT,CAAC;AACJ,CAAC;AAED,MAAM,CAAC,IAAM,kBAAkB,GAC7B,UAAC,OAAoD,EAAE,UAAiB;IAAjB,2BAAA,EAAA,iBAAiB;IACxE,OAAA,UAAC,KAAY,EAAE,IAAW;;QACxB,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC;QACrB,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,IAAI,CACvB,MAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,KAAK,uDAAG,UAAC,IAAI;YACnB,KAAK,CAAC,UAAU,GAAG,IAAI,CAAC;YACxB,IAAI,UAAU,IAAI,2BAA2B,CAAC,KAAK,CAAC,EAAE;gBACpD,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;aAC3B;YACD,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC;QACxB,CAAC,CAAC,CACH,CAAC;IACJ,CAAC;AAXD,CAWC,CAAC\",\"sourcesContent\":[\"import { action } from \\\"@formily/reactive\\\";\\r\\nimport { Field, Form } from \\\"@formily/core/esm/models\\\";\\r\\n\\r\\nfunction checkExsitInFieldDataSource(field: Field) {\\r\\n  return (\\r\\n    field.dataSource?.findIndex(\\r\\n      ({ value }: any) => field.value === value || field.value?.includes(value)\\r\\n    ) === -1\\r\\n  );\\r\\n}\\r\\n\\r\\nexport const useAsyncDataSource =\\r\\n  (service: (field: Field, form?: Form) => Promise<any>, checkExsit = true) =>\\r\\n  (field: Field, form?: Form) => {\\r\\n    field.loading = true;\\r\\n    service(field, form).then(\\r\\n      action?.bound?.((data) => {\\r\\n        field.dataSource = data;\\r\\n        if (checkExsit && checkExsitInFieldDataSource(field)) {\\r\\n          field.setValue(undefined);\\r\\n        }\\r\\n        field.loading = false;\\r\\n      })\\r\\n    );\\r\\n  };\\r\\n\"]}"}
