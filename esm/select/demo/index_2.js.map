{"version":3,"file":"index_2.js","sourceRoot":"lib/","sources":["select/demo/index_2.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Select, FormItem, FormButtonGroup, Submit } from '@formily/arco'\r\nimport { createForm } from '@formily/core'\r\nimport { FormProvider, createSchemaField } from '@formily/react'\r\nimport { action } from '@formily/reactive'\r\n\r\nconst SchemaField = createSchemaField({\r\n  components: {\r\n    Select,\r\n    FormItem,\r\n  },\r\n})\r\n\r\nconst loadData = async (field) => {\r\n  const linkage = field.query('linkage').get('value')\r\n  if (!linkage) return []\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      if (linkage === 1) {\r\n        resolve([\r\n          {\r\n            label: 'AAA',\r\n            value: 'aaa',\r\n          },\r\n          {\r\n            label: 'BBB',\r\n            value: 'ccc',\r\n          },\r\n        ])\r\n      } else if (linkage === 2) {\r\n        resolve([\r\n          {\r\n            label: 'CCC',\r\n            value: 'ccc',\r\n          },\r\n          {\r\n            label: 'DDD',\r\n            value: 'ddd',\r\n          },\r\n        ])\r\n      }\r\n    }, 1500)\r\n  })\r\n}\r\n\r\nconst useAsyncDataSource = (service) => (field) => {\r\n  field.loading = true\r\n  service(field).then(\r\n    action.bound?.((data) => {\r\n      field.dataSource = data\r\n      field.loading = false\r\n    })\r\n  )\r\n}\r\n\r\nconst form = createForm()\r\n\r\nconst schema: any = {\r\n  type: 'object',\r\n  properties: {\r\n    linkage: {\r\n      type: 'string',\r\n      title: '联动选择框',\r\n      enum: [\r\n        { label: '发请求1', value: 1 },\r\n        { label: '发请求2', value: 2 },\r\n      ],\r\n      'x-decorator': 'FormItem',\r\n      'x-component': 'Select',\r\n      'x-component-props': {\r\n        style: {\r\n          width: 120,\r\n        },\r\n      },\r\n    },\r\n    select: {\r\n      type: 'string',\r\n      title: '异步选择框',\r\n      'x-decorator': 'FormItem',\r\n      'x-component': 'Select',\r\n      'x-component-props': {\r\n        style: {\r\n          width: 120,\r\n        },\r\n      },\r\n      'x-reactions': '{{useAsyncDataSource(loadData)}}',\r\n    },\r\n  },\r\n}\r\n\r\nexport default () => (\r\n  <FormProvider form={form}>\r\n    <SchemaField schema={schema} scope={{ useAsyncDataSource, loadData }} />\r\n    <FormButtonGroup>\r\n      <Submit onSubmit={console.log}>提交</Submit>\r\n    </FormButtonGroup>\r\n  </FormProvider>\r\n)\r\n"]}