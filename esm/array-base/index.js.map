{"version":3,"file":"index.js","sourceRoot":"lib/","sources":["array-base/index.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { createContext, useContext } from 'react'\nimport { Button } from '@arco-design/web-react'\nimport { ButtonProps } from '@arco-design/web-react/es/button'\nimport {\n  IconPlus,\n  IconDelete,\n  IconMenu,\n  IconCaretDown,\n  IconCaretUp,\n} from '@arco-design/web-react/icon'\nimport type { IconProps as ArcoIconProps } from '@arco-design/web-react/icon'\nimport { useField, useFieldSchema, Schema, JSXComponent } from '@formily/react'\nimport { ArrayField } from '@formily/core'\nimport { isValid } from '@formily/shared'\nimport { SortableHandle } from 'react-sortable-hoc'\nimport cls from 'classnames'\n\nimport './index.scss'\nimport { usePrefixCls } from '../__builtins__'\n\ninterface IconProps extends ArcoIconProps {\n  style?: React.CSSProperties\n  spin?: boolean\n}\n\nexport interface IArrayBaseAdditionProps extends ButtonProps {\n  title?: string\n  method?: 'push' | 'unshift'\n}\n\nexport interface IArrayBaseProps {\n  disabled?: boolean\n  onAdd?: (index: number) => void\n  onRemove?: (index: number) => void\n  onMoveDown?: (index: number) => void\n  onMoveUp?: (index: number) => void\n}\n\nexport interface IArrayBaseContext {\n  props: IArrayBaseProps\n  field: ArrayField\n  schema: Schema\n}\n\nexport interface IArrayBaseItemProps {\n  index: number\n  style?: React.CSSProperties\n  record: any\n}\n\nexport type ArrayBaseMixins = {\n  Addition?: React.FC<IArrayBaseAdditionProps>\n  Remove?: React.FC<IconProps & { index?: number }>\n  MoveUp?: React.FC<IconProps & { index?: number }>\n  MoveDown?: React.FC<IconProps & { index?: number }>\n  SortHandle?: React.FC<IconProps & { index?: number }>\n  Index?: React.FC\n  useArray?: () => IArrayBaseContext\n  useIndex?: () => number\n  useRecord?: (record?: number) => any\n}\n\ntype ComposedArrayBase = React.FC<React.PropsWithChildren<IArrayBaseProps>> &\n  ArrayBaseMixins & {\n    Item: React.FC<IArrayBaseItemProps>\n    mixin: <T extends JSXComponent>(target: T) => T & ArrayBaseMixins\n  }\n\nconst ArrayBaseContext = createContext<IArrayBaseContext>(null)\n\nconst ItemContext = createContext<IArrayBaseItemProps>(null)\n\nconst useArray = () => useContext(ArrayBaseContext)\n\nconst useIndex = (index?: number) => {\n  const ctx = useContext(ItemContext)\n  return ctx ? ctx.index : index ?? 0\n}\n\nconst useRecord = (record?: number) => {\n  const ctx = useContext(ItemContext)\n  return ctx ? ctx.record : record\n}\n\nconst getDefaultValue = (defaultValue: any, schema: Schema) => {\n  if (isValid(defaultValue)) return defaultValue\n  if (Array.isArray(schema?.items))\n    return getDefaultValue(defaultValue, schema.items[0])\n  if (schema?.items?.type === 'array') return []\n  if (schema?.items?.type === 'boolean') return true\n  if (schema?.items?.type === 'date') return ''\n  if (schema?.items?.type === 'datetime') return ''\n  if (schema?.items?.type === 'number') return 0\n  if (schema?.items?.type === 'object') return {}\n  if (schema?.items?.type === 'string') return ''\n  return null\n}\n\nexport const ArrayBase: ComposedArrayBase = (props) => {\n  const field = useField<ArrayField>()\n  const schema = useFieldSchema()\n  return (\n    <ArrayBaseContext.Provider value={{ field, schema, props }}>\n      {props.children}\n    </ArrayBaseContext.Provider>\n  )\n}\n\nArrayBase.Item = ({ children, ...props }: any) => (\n  <ItemContext.Provider value={props}>{children}</ItemContext.Provider>\n)\n\nconst SortHandle = SortableHandle((props: any) => {\n  const prefixCls = usePrefixCls('array-base')\n  return (\n    <IconMenu\n      {...props}\n      className={cls(`${prefixCls}-sort-handle`, props.className)}\n      style={{ ...props.style }}\n    />\n  )\n}) as any\n\nArrayBase.SortHandle = (props) => {\n  const array = useArray()\n  if (!array) return null\n  if (array.field?.pattern !== 'editable') return null\n  return <SortHandle {...props} />\n}\n\nconst Index = (props) => {\n  const { renderIndex } = props\n  const index = useIndex()\n  const prefixCls = usePrefixCls('array-base')\n  return (\n    <span {...props} className={`${prefixCls}-index`}>\n      {renderIndex?.(index) ?? `#${index + 1}.`}\n    </span>\n  )\n}\n\nArrayBase.Index = Index\n\nconst Addition = (props) => {\n  const self = useField()\n  const array = useArray()\n  const prefixCls = usePrefixCls('array-base')\n  if (!array) return null\n  if (\n    array?.field?.pattern !== 'editable' &&\n    array?.field?.pattern !== 'disabled'\n  ) {\n    return null\n  }\n  return (\n    <Button\n      long\n      {...props}\n      disabled={array?.field?.disabled}\n      className={cls(`${prefixCls}-addition`, props.className)}\n      onClick={(e) => {\n        if (array.props?.disabled) return\n        const defaultValue = getDefaultValue(props.defaultValue, array.schema)\n        if (props.method === 'unshift') {\n          array?.field?.unshift(defaultValue)\n          array.props?.onAdd?.(0)\n        } else {\n          array?.field?.push?.(defaultValue)\n          array.props?.onAdd?.(array?.field?.value?.length - 1)\n        }\n        props.onClick?.(e)\n      }}\n      icon={<IconPlus />}\n    >\n      {self.title || props.title}\n    </Button>\n  )\n}\n\nArrayBase.Addition = Addition\n\nArrayBase.Remove = React.forwardRef((props, ref) => {\n  const index = useIndex()\n  const array = useArray()\n  const prefixCls = usePrefixCls('array-base')\n  if (!array) return null\n  if (array?.field?.pattern !== 'editable') return null\n  return (\n    <IconDelete\n      {...props}\n      className={cls(`${prefixCls}-remove`, props.className)}\n      ref={ref}\n      onClick={(e: any) => {\n        if (array.props?.disabled) return\n        e.stopPropagation()\n        array.field?.remove?.(index)\n        array.props?.onRemove?.(index)\n        if (props.onClick) {\n          props.onClick(e)\n        }\n      }}\n    />\n  )\n})\n\nArrayBase.MoveDown = React.forwardRef((props, ref) => {\n  const index = useIndex(props.index)\n  const array = useArray()\n  const prefixCls = usePrefixCls('array-base-move-down')\n  if (array?.field?.pattern !== 'editable') return null\n  return (\n    <IconCaretDown\n      {...props}\n      className={cls(prefixCls, props.className)}\n      ref={ref}\n      onClick={(e: any) => {\n        if (array.props?.disabled) return\n        e.stopPropagation()\n        array.field?.moveDown?.(index)\n        array.props?.onMoveDown?.(index)\n        if (props.onClick) {\n          props.onClick(e)\n        }\n      }}\n    />\n  )\n})\n\nArrayBase.MoveUp = React.forwardRef((props, ref) => {\n  const index = useIndex(props.index)\n  const array = useArray()\n  const prefixCls = usePrefixCls('array-base-move-up')\n  if (array?.field?.pattern !== 'editable') return null\n  return (\n    <IconCaretUp\n      {...props}\n      className={cls(prefixCls, props.className)}\n      ref={ref}\n      onClick={(e: any) => {\n        if (array.props?.disabled) return\n        e.stopPropagation()\n        array?.field?.moveUp(index)\n        array?.props?.onMoveUp?.(index)\n        if (props.onClick) {\n          props.onClick(e)\n        }\n      }}\n    />\n  )\n})\n\nArrayBase.useArray = useArray\nArrayBase.useIndex = useIndex\nArrayBase.useRecord = useRecord\nArrayBase.mixin = (target: any) => {\n  target.Index = ArrayBase.Index\n  target.SortHandle = ArrayBase.SortHandle\n  target.Addition = ArrayBase.Addition\n  target.Remove = ArrayBase.Remove\n  target.MoveDown = ArrayBase.MoveDown\n  target.MoveUp = ArrayBase.MoveUp\n  target.useArray = ArrayBase.useArray\n  target.useIndex = ArrayBase.useIndex\n  target.useRecord = ArrayBase.useRecord\n  return target\n}\n\nexport default ArrayBase\n"]}