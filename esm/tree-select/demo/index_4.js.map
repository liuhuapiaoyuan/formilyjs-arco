{"version":3,"file":"index_4.js","sourceRoot":"lib/","sources":["tree-select/demo/index_4.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { FormButtonGroup, Submit, SchemaRender } from '@formily/arco'\r\nimport { createForm } from '@formily/core'\r\nimport { FormProvider } from '@formily/react'\r\nimport { action } from '@formily/reactive'\r\n\r\nconst loadData = async (field) => {\r\n  const linkage = field.query('linkage').get('value')\r\n  if (!linkage) {\r\n    return []\r\n  }\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      if (linkage === 1) {\r\n        resolve([\r\n          {\r\n            label: 'AAA',\r\n            value: 'aaa',\r\n            key: '0',\r\n            children: [\r\n              {\r\n                label: 'Child Node1',\r\n                value: '0-0-0',\r\n                key: '0-0-0',\r\n              },\r\n              {\r\n                label: 'Child Node2',\r\n                value: '0-0-1',\r\n                key: '0-0-1',\r\n              },\r\n              {\r\n                label: 'Child Node3',\r\n                value: '0-0-2',\r\n                key: '0-0-2',\r\n              },\r\n            ],\r\n          },\r\n          {\r\n            label: 'BBB',\r\n            value: 'ccc',\r\n            key: '1',\r\n            children: [\r\n              {\r\n                label: 'Child Node1',\r\n                value: '0-1-0',\r\n                key: '0-1-0',\r\n              },\r\n              {\r\n                label: 'Child Node2',\r\n                value: '0-1-1',\r\n                key: '0-1-1',\r\n              },\r\n              {\r\n                label: 'Child Node3',\r\n                value: '0-1-2',\r\n                key: '0-1-2',\r\n              },\r\n            ],\r\n          },\r\n        ])\r\n      } else if (linkage === 2) {\r\n        resolve([\r\n          {\r\n            label: 'CCC',\r\n            value: 'ccc',\r\n            key: '3',\r\n            children: [\r\n              {\r\n                label: 'Child Node1',\r\n                value: '0-0-0',\r\n                key: '0-0-0',\r\n              },\r\n              {\r\n                label: 'Child Node2',\r\n                value: '0-0-1',\r\n                key: '0-0-1',\r\n              },\r\n              {\r\n                label: 'Child Node3',\r\n                value: '0-0-2',\r\n                key: '0-0-2',\r\n              },\r\n            ],\r\n          },\r\n          {\r\n            label: 'DDD',\r\n            value: 'ddd',\r\n            key: '4',\r\n            children: [\r\n              {\r\n                label: 'Child Node1',\r\n                value: '0-1-0',\r\n                key: '0-1-0',\r\n              },\r\n              {\r\n                label: 'Child Node2',\r\n                value: '0-1-1',\r\n                key: '0-1-1',\r\n              },\r\n              {\r\n                label: 'Child Node3',\r\n                value: '0-1-2',\r\n                key: '0-1-2',\r\n              },\r\n            ],\r\n          },\r\n        ])\r\n      }\r\n    }, 1500)\r\n  })\r\n}\r\n\r\nconst useAsyncDataSource = (service) => (field) => {\r\n  field.loading = true\r\n  service(field).then(\r\n    action.bound?.((data) => {\r\n      field.dataSource = data\r\n      field.loading = false\r\n    })\r\n  )\r\n}\r\n\r\nconst form = createForm()\r\n\r\nconst schema = {\r\n  type: 'object',\r\n  properties: {\r\n    linkage: {\r\n      type: 'string',\r\n      title: '联动选择框',\r\n      enum: [\r\n        { label: '发请求1', value: 1, key: '0' },\r\n        { label: '发请求2', value: 2, key: '1' },\r\n      ],\r\n      'x-decorator': 'FormItem',\r\n      'x-component': 'Select',\r\n      'x-component-props': {\r\n        style: {\r\n          width: 200,\r\n        },\r\n      },\r\n    },\r\n    select: {\r\n      type: 'string',\r\n      title: '异步选择框',\r\n      'x-decorator': 'FormItem',\r\n      'x-component': 'TreeSelect',\r\n      'x-component-props': {\r\n        style: {\r\n          width: 200,\r\n        },\r\n      },\r\n      'x-reactions': ['{{useAsyncDataSource(loadData)}}'],\r\n    },\r\n  },\r\n}\r\n\r\nexport default () => (\r\n  <FormProvider form={form}>\r\n    <SchemaRender schema={schema} scope={{ useAsyncDataSource, loadData }} />\r\n    <FormButtonGroup>\r\n      <Submit onSubmit={console.log}>提交</Submit>\r\n    </FormButtonGroup>\r\n  </FormProvider>\r\n)\r\n"]}