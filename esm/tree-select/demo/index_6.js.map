{"version":3,"file":"index_6.js","sourceRoot":"lib/","sources":["tree-select/demo/index_6.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport {\r\n  TreeSelect,\r\n  Select,\r\n  FormItem,\r\n  FormButtonGroup,\r\n  Submit,\r\n} from '@formily/arco'\r\nimport {\r\n  createForm,\r\n  Field as FieldType,\r\n  FormPathPattern,\r\n  onFieldReact,\r\n} from '@formily/core'\r\nimport { FormProvider, Field } from '@formily/react'\r\nimport { action } from '@formily/reactive'\r\n\r\nconst useAsyncDataSource = (\r\n  pattern: FormPathPattern,\r\n  service: (\r\n    field: FieldType\r\n  ) => Promise<{ label: string; value: any; [key: string]: any }[]>\r\n) => {\r\n  onFieldReact(pattern, (field: any) => {\r\n    field.loading = true\r\n    service(field).then(\r\n      action.bound?.((data) => {\r\n        field.dataSource = data\r\n        field.loading = false\r\n      })\r\n    )\r\n  })\r\n}\r\n\r\nconst form = createForm({\r\n  effects: () => {\r\n    useAsyncDataSource('select', async (field) => {\r\n      const linkage = field.query('linkage').get('value')\r\n      if (!linkage) {\r\n        return []\r\n      }\r\n      return new Promise((resolve) => {\r\n        setTimeout(() => {\r\n          if (linkage === 1) {\r\n            resolve([\r\n              {\r\n                label: 'AAA',\r\n                value: 'aaa',\r\n                key: '0',\r\n                children: [\r\n                  {\r\n                    label: 'Child Node1',\r\n                    value: '0-0-0',\r\n                    key: '0-0-0',\r\n                  },\r\n                  {\r\n                    label: 'Child Node2',\r\n                    value: '0-0-1',\r\n                    key: '0-0-1',\r\n                  },\r\n                  {\r\n                    label: 'Child Node3',\r\n                    value: '0-0-2',\r\n                    key: '0-0-2',\r\n                  },\r\n                ],\r\n              },\r\n              {\r\n                label: 'BBB',\r\n                value: 'ccc',\r\n                key: '1',\r\n                children: [\r\n                  {\r\n                    label: 'Child Node1',\r\n                    value: '0-1-0',\r\n                    key: '0-1-0',\r\n                  },\r\n                  {\r\n                    label: 'Child Node2',\r\n                    value: '0-1-1',\r\n                    key: '0-1-1',\r\n                  },\r\n                  {\r\n                    label: 'Child Node3',\r\n                    value: '0-1-2',\r\n                    key: '0-1-2',\r\n                  },\r\n                ],\r\n              },\r\n            ])\r\n          } else if (linkage === 2) {\r\n            resolve([\r\n              {\r\n                label: 'CCC',\r\n                value: 'ccc',\r\n                key: '2',\r\n                children: [\r\n                  {\r\n                    label: 'Child Node1',\r\n                    value: '0-0-0',\r\n                    key: '0-0-0',\r\n                  },\r\n                  {\r\n                    label: 'Child Node2',\r\n                    value: '0-0-1',\r\n                    key: '0-0-1',\r\n                  },\r\n                  {\r\n                    label: 'Child Node3',\r\n                    value: '0-0-2',\r\n                    key: '0-0-2',\r\n                  },\r\n                ],\r\n              },\r\n              {\r\n                label: 'DDD',\r\n                value: 'ddd',\r\n                key: '3',\r\n                children: [\r\n                  {\r\n                    label: 'Child Node1',\r\n                    value: '0-1-0',\r\n                    key: '0-1-0',\r\n                  },\r\n                  {\r\n                    label: 'Child Node2',\r\n                    value: '0-1-1',\r\n                    key: '0-1-1',\r\n                  },\r\n                  {\r\n                    label: 'Child Node3',\r\n                    value: '0-1-2',\r\n                    key: '0-1-2',\r\n                  },\r\n                ],\r\n              },\r\n            ])\r\n          }\r\n        }, 1500)\r\n      })\r\n    })\r\n  },\r\n})\r\n\r\nexport default () => (\r\n  <FormProvider form={form}>\r\n    <Field\r\n      name=\"linkage\"\r\n      title=\"联动选择框\"\r\n      dataSource={[\r\n        { label: '发请求1', value: 1, key: '0' },\r\n        { label: '发请求2', value: 2, key: '1' },\r\n      ]}\r\n      decorator={[FormItem]}\r\n      component={[\r\n        Select,\r\n        {\r\n          style: {\r\n            width: 200,\r\n          },\r\n        },\r\n      ]}\r\n    />\r\n    <Field\r\n      name=\"select\"\r\n      title=\"异步选择框\"\r\n      decorator={[FormItem]}\r\n      component={[\r\n        TreeSelect,\r\n        {\r\n          style: {\r\n            width: 200,\r\n          },\r\n        },\r\n      ]}\r\n    />\r\n    <FormButtonGroup>\r\n      <Submit onSubmit={console.log}>提交</Submit>\r\n    </FormButtonGroup>\r\n  </FormProvider>\r\n)\r\n"]}