{"version":3,"file":"index_2.js","sourceRoot":"lib/","sources":["tree-select/demo/index_2.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { FormButtonGroup, Submit, SchemaField } from '@formily/arco'\r\nimport { createForm, Field, FormPathPattern, onFieldReact } from '@formily/core'\r\nimport { FormProvider } from '@formily/react'\r\nimport { action } from '@formily/reactive'\r\n\r\nconst useAsyncDataSource = (\r\n  pattern: FormPathPattern,\r\n  service: (\r\n    field: Field\r\n  ) => Promise<{ label: string; value: any; key?: string; children?: any[] }[]>\r\n) => {\r\n  onFieldReact(pattern, (field: any) => {\r\n    field.loading = true\r\n    service(field).then(\r\n      action.bound?.((data) => {\r\n        field.dataSource = data\r\n        field.loading = false\r\n      })\r\n    )\r\n  })\r\n}\r\n\r\nconst form = createForm({\r\n  effects: () => {\r\n    useAsyncDataSource('select', async (field) => {\r\n      const linkage = field.query('linkage').get('value')\r\n      if (!linkage) {\r\n        return []\r\n      }\r\n      return new Promise((resolve) => {\r\n        setTimeout(() => {\r\n          if (linkage === 1) {\r\n            resolve([\r\n              {\r\n                label: 'AAA',\r\n                value: 'aaa',\r\n                key: '0',\r\n                children: [\r\n                  {\r\n                    label: 'Child Node1',\r\n                    value: 'Child Node1',\r\n                    key: '0-0',\r\n                  },\r\n                  {\r\n                    label: 'Child Node2',\r\n                    value: 'Child Node2',\r\n                    key: '0-1',\r\n                  },\r\n                  {\r\n                    label: 'Child Node3',\r\n                    value: 'Child Node3',\r\n                    key: '0-2',\r\n                  },\r\n                ],\r\n              },\r\n              {\r\n                label: 'BBB',\r\n                value: 'ccc',\r\n                key: '1',\r\n                children: [\r\n                  {\r\n                    label: 'Child Node1',\r\n                    value: '1-0',\r\n                    key: '1-0',\r\n                  },\r\n                  {\r\n                    label: 'Child Node2',\r\n                    value: '1-1',\r\n                    key: '1-1',\r\n                  },\r\n                  {\r\n                    label: 'Child Node3',\r\n                    value: '1-2',\r\n                    key: '1-2',\r\n                  },\r\n                ],\r\n              },\r\n            ])\r\n          } else if (linkage === 2) {\r\n            resolve([\r\n              {\r\n                label: 'CCC',\r\n                value: 'ccc',\r\n                key: '2',\r\n                children: [\r\n                  {\r\n                    label: 'Child Node1',\r\n                    value: '2-0',\r\n                    key: '2-0',\r\n                  },\r\n                  {\r\n                    label: 'Child Node2',\r\n                    value: '2-1',\r\n                    key: '2-2',\r\n                  },\r\n                  {\r\n                    label: 'Child Node3',\r\n                    value: '2-2',\r\n                    key: '2-2',\r\n                  },\r\n                ],\r\n              },\r\n              {\r\n                label: 'DDD',\r\n                value: 'ddd',\r\n                key: '3',\r\n                children: [\r\n                  {\r\n                    label: 'Child Node1',\r\n                    value: '3-0',\r\n                    key: '3-0',\r\n                  },\r\n                  {\r\n                    label: 'Child Node2',\r\n                    value: '3-1',\r\n                    key: '3-2',\r\n                  },\r\n                  {\r\n                    label: 'Child Node3',\r\n                    value: '4-2',\r\n                    key: '4-2',\r\n                  },\r\n                ],\r\n              },\r\n            ])\r\n          }\r\n        }, 1500)\r\n      })\r\n    })\r\n  },\r\n})\r\n\r\nexport default () => (\r\n  <FormProvider form={form}>\r\n    <SchemaField>\r\n      <SchemaField.Number\r\n        name=\"linkage\"\r\n        title=\"联动选择框\"\r\n        x-decorator=\"FormItem\"\r\n        x-component=\"Select\"\r\n        enum={[\r\n          { label: '发请求1', value: 1, key: '0' },\r\n          { label: '发请求2', value: 2, key: '1' },\r\n        ]}\r\n        x-component-props={{\r\n          style: {\r\n            width: 200,\r\n          },\r\n        }}\r\n      />\r\n      <SchemaField.String\r\n        name=\"select\"\r\n        title=\"异步选择框\"\r\n        x-decorator=\"FormItem\"\r\n        x-component=\"TreeSelect\"\r\n        x-component-props={{\r\n          style: {\r\n            width: 200,\r\n          },\r\n        }}\r\n      />\r\n    </SchemaField>\r\n    <FormButtonGroup>\r\n      <Submit onSubmit={console.log}>提交</Submit>\r\n    </FormButtonGroup>\r\n  </FormProvider>\r\n)\r\n"]}