{"version":3,"file":"demo1.js","sourceRoot":"lib/","sources":["schema-field/demo/demo1.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Form, SchemaRender } from '@formily/arco'\r\nimport { createForm } from '@formily/core'\r\nimport { action } from '@formily/reactive'\r\nimport { FormConsumer } from '@formily/react'\r\n\r\nconst form = createForm({\r\n  initialValues: {\r\n    input: 'asd',\r\n    textarea: 'fjdljfklgdsafjds',\r\n  },\r\n})\r\n\r\nexport const SchemaInput = {\r\n  type: 'object',\r\n  properties: {\r\n    input: {\r\n      // will be mapped to field name in semi-form-items\r\n      type: 'string',\r\n      title: 'Input2',\r\n      required: true,\r\n      'x-decorator': 'FormItem',\r\n      'x-decorator-props': {\r\n        tooltip: '123',\r\n        tooltipProps: {\r\n          position: 'bottom',\r\n        },\r\n      },\r\n      'x-component': 'Input',\r\n      'x-component-props': {\r\n        value: 345,\r\n      },\r\n    },\r\n    textarea: {\r\n      type: 'string',\r\n      title: 'textarea',\r\n      'x-decorator': 'FormItem',\r\n      'x-component': 'Input.TextArea',\r\n      'x-component-props': {},\r\n      'x-reactions': {\r\n        dependencies: ['input'],\r\n        fulfill: {\r\n          schema: {\r\n            visible: '{{$deps[0] && $deps[0] !== \"asd\"}}',\r\n          },\r\n          run: 'test()',\r\n        },\r\n      },\r\n    },\r\n    select: {\r\n      type: 'string',\r\n      title: '异步选择框',\r\n      'x-decorator': 'FormItem',\r\n      'x-component': 'Select',\r\n      'x-component-props': {},\r\n      'x-reactions': ['{{useAsyncDataSource(loadData)}}'],\r\n    },\r\n    submit: {\r\n      type: 'string',\r\n      title: '提交',\r\n      'x-decorator': 'FormItem',\r\n      'x-component': 'Submit',\r\n      'x-content': '哈哈哈',\r\n      'x-component-props': {\r\n        onSubmit: (e) => console.log('====', e),\r\n      },\r\n    },\r\n  },\r\n}\r\n\r\nconst loadData = async (field) => {\r\n  const input = field.query('input').get('value')\r\n  if (!input) {\r\n    return []\r\n  }\r\n  return new Promise((resolve) => {\r\n    setTimeout(() => {\r\n      if (input === 'asd') {\r\n        resolve([\r\n          {\r\n            label: 'AAA',\r\n            value: 'aaa',\r\n          },\r\n          {\r\n            label: 'BBB',\r\n            value: 'ccc',\r\n          },\r\n        ])\r\n      } else {\r\n        resolve([\r\n          {\r\n            label: 'CCC',\r\n            value: 'ccc',\r\n          },\r\n          {\r\n            label: 'DDD',\r\n            value: 'ddd',\r\n          },\r\n        ])\r\n      }\r\n    }, 1500)\r\n  })\r\n}\r\n\r\nconst useAsyncDataSource = (service) => (field) => {\r\n  field.loading = true\r\n  service(field).then(\r\n    action.bound?.((data) => {\r\n      field.dataSource = data\r\n      field.loading = false\r\n    })\r\n  )\r\n}\r\n\r\nconst test = () => {\r\n  console.log('=======test')\r\n}\r\n\r\nconst FormEg = (props) => {\r\n  const { schema, ...rest } = props\r\n  return (\r\n    <Form form={form} {...rest}>\r\n      <SchemaRender\r\n        schema={schema}\r\n        scope={{ test, useAsyncDataSource, loadData }}\r\n      />\r\n      <FormConsumer>\r\n        {() => <div>{JSON.stringify(form.values)}</div>}\r\n      </FormConsumer>\r\n    </Form>\r\n  )\r\n}\r\n\r\nexport default () => <FormEg schema={SchemaInput} />\r\n"]}